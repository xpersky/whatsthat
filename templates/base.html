{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="shortcut icon" href="">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <link rel="stylesheet" href="{% static 'base/base.css' %}" />
    {% block stylesheets %}{% endblock %}
    <title>{% block title %} Website title {% endblock %}</title>
</head>

<body>
    <a href='#home' class='back'><img src="{% static 'base/up.png' %}"></a>
    <div class='home_con'>
        <div id='home'>
        <nav> 
            <ul>
            <li><a href='#home' class='hm'><img src="{% static 'base/home.png' %}"></a></li>
            <li><a href='#about' class='ab'><img src="{% static 'base/about.png' %}"></a></li>
            <li><a href='#stats' class='st'><img src="{% static 'base/analytics.png' %}"></a></li>
            <li><a href='#contact' class='cn'><img src="{% static 'base/contact.png' %}"></a></li>
            </ul>
        </nav>
            {% block content %}
            {% endblock %}
        </div>
    </div>
    <div class='about_con'>
        <div id='about'>
            <div class='section_right'>
                <div class='ab_title_con'> <div class='ab_title'>ABOUT US</div> </div>
                <div class='ab_text'> {% lorem 1 %} </div>
            </div>
            <div class='section_left'>
                <div class='ab_img'>
                    <img src="{% static 'base/about_img.png' %}" alt="doctor_image">  
                </div>
            </div>
        </div>
    </div>
    <div class='stats_con'>
        <div id='stats'>
            <div class='st_title_con'> <div class='st_title'> Statistics </div> </div>
            <div class='st_chart_con'>
                <div class='st_chart'> 
                    <div class='chart_container'> 
                        <canvas id="usage"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class='contact_con'>
        <div id='contact'>
            <div class='form_con'>
                <form action='mailto:piotrlata97@gmail.com' method='post'>
                {% csrf_token %}
                    <div class='f_title'>
                        Contact us
                    </div>
                    <div class='row'>
                        <input type="text" id="name_in" name="name" placeholder="Your Name (required)" required>
                        <input type="email" id="email_in" name="email" placeholder="Your E-mail (required)" required>
                    </div>
                    <div class='row'>
                        <input type="text" id="mess_in" name="message" placeholder="Your Message (required)" required>
                    </div>
                    <div class='sub'>
                        <input type="submit" id="subthis" value="Contact us">
                    </div>
                </form>
            </div>
        </div>
    </div>
    <footer>

        <div class='sources'> 
            Made with 
            <a href="https://www.tensorflow.org/">
                <img src="{% static 'base/tf.png' %}" alt="Tensorflow">
            </a>
            <a href="https://keras.io/">
                <img src="{% static 'base/kr.png' %}" alt="Keras">
            </a>
        </div>

        <div class='sources'>
            <a href="https://www.djangoproject.com/"> 
                <img src="{% static 'base/dj.png' %}" alt="Django"> 
            </a>
            <a href="https://www.chartjs.org/">
                   <img src="{% static 'base/chartjs.svg' %}" alt="Chart.js"> Chart.js
            </a>
        </div>

        <div class='icsources'>
            Icons made by <a href="https://www.flaticon.com/authors/vectors-market" title="Vectors Market">Vectors Market</a> 
            from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> 
            is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a>
        </div>
        <div>Made by <a href="https://github.com/xpersky">persky</a> copyright Â© all rights reserved</div>

    </footer>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.js"></script>
    <script>
        $(document).ready(function() {
        
        // Visual controll variables

        var hidden_about = true;
        var hidden_stats = true;
        var hidden_contact = true;

        var home_lock = false;
        var about_lock = false;
        var stats_lock = false;
        var contact_lock = false;
        

        $( window ).on( "load", function() { 
            if(history.state == 'home')
            {
                scrollToElement($('#home'), $('body,html'));       
            }
            else if(history.state == 'about')
            {
                scrollToElement($('#about'), $('body,html'));
            }
            else if(history.state == 'stats')
            {
                scrollToElement($('#stats'), $('body,html'));
            }
            else if(history.state == 'contact')
            {
                scrollToElement($('#contact'), $('body,html'));
            }
            else if(history.state == 'footer')
            {
                scrollToElement($('footer'), $('body,html'));
            }
        });

        // Scroll To function
        function scrollToElement(element, parent, duration) {
            $(parent)[0].scrollIntoView(true);
            $(parent).animate({
                scrollTop: $(parent).scrollTop() + $(element).offset().top - $(parent).offset().top
                }, {
                duration: duration,
                easing: 'linear'
            });
        }
        // Navigation
        $('.hm').on('click', function() {
            var paretq = $('body,html');
            var elemq = $('#home');
            scrollToElement(elemq, paretq, 600);
            history.replaceState('home', null, '/home');
            return false;
        })
        $('.ab').on('click', function() {
            var paretq = $('body,html');
            var elemq = $('#about');
            scrollToElement(elemq, paretq, 800);
            history.replaceState('about', null, '/about');
            return false;
        })
        $('.st').on('click', function() {
            var paretq = $('body,html');
            var elemq = $('#stats');
            scrollToElement(elemq, paretq, 1600);
            history.replaceState('stats', null, '/stats');
            return false;
        })
        $('.cn').on('click', function() {
            var paretq = $('body,html');
            var elemq = $('#contact');
            scrollToElement(elemq, paretq, 2400);
            history.replaceState('contact', null, '/contact');
            return false;
        })
        $('.back').on('click', function() {
            $('body,html').animate({
                scrollTop: 0
                }, {
                duration: 3000,
                easing: 'linear'
            });
            history.replaceState('home', null, '/home');
            return false;
        })
        $(window).scroll(function() {

        if ( $(this).scrollTop() >= ($(document).height() - $(this).height() - 50 )) {
            $('.back').fadeIn();
        } else {
            if( $('back').css('display') != 'none') $('.back').fadeOut();
        }

        if ( $(this).scrollTop() >= 0 &&  $(this).scrollTop() < $('.about_con').offset().top - 50 )
        {
            if(history.state != 'home') history.replaceState('home', null, '/home');
        }
        else if ( $(this).scrollTop() >= $('.about_con').offset().top - 50 && $(this).scrollTop() < $('.stats_con').offset().top - 50 )
        {
            if(history.state != 'about') history.replaceState('about', null, '/about');
            if(hidden_about)
            {
                $('.section_left').fadeIn();
                setTimeout(function(){ $('.ab_title_con').fadeIn(); },  250);
                setTimeout(function(){ $('.ab_text').fadeIn(); },   500);
                hidden_about = false;
            }
        }
        else if ( $(this).scrollTop() >= $('.stats_con').offset().top - 50 && $(this).scrollTop() < $('.contact_con').offset().top - 50 )
        {
            if(history.state != 'stats') history.replaceState('stats', null, '/stats');
            if(hidden_stats)
            {
                $('.st_title_con').fadeIn();
                setTimeout(function(){ $('.st_chart_con').fadeIn(); },  250);
                setTimeout(function(){
                    var ctx = document.getElementById('usage').getContext('2d');
                    var myChart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'June','July','Aug','Sept','Oct','Nov','Dec'],
                            datasets: [{
                                label: 'identified as cancer',
                                data: [20, 24, 32, 45, 55, 44, 41, 44, 58, 67, 75, 92],
                                backgroundColor: 'rgba(255, 99, 132, 0.5)' , 
                                borderColor: 'rgba(255, 99, 132, 1)' ,
                                borderWidth: 1
                            },
                            {
                                label: 'identified as not a cancer',
                                data: [24, 28, 34, 49, 62, 50, 43, 48, 61, 60, 76, 90],
                                backgroundColor: 'rgba(75, 192, 192, 0.5)' ,
                                borderColor: 'rgba(75, 192, 192, 1)' , 
                                borderWidth: 1
                            }]
                        },
                        options: {
                            legend: {
                                display: false
                                },
                            scales: {
                                yAxes: [{
                                    ticks: {
                                        beginAtZero: true
                                    }
                                }]
                            }
                        }
                    }); }, 250)
                hidden_stats = false;
            }
        }
        else if ( $(this).scrollTop() >= $('.contact_con').offset().top - 50 && $(this).scrollTop() < ($('footer').offset().top - $(this).height()))
        {
            if(history.state != 'contact') history.replaceState('contact', null, '/contact');
            if(hidden_contact)
            {
                $('.form_con').fadeIn();
                hidden_contact = false;
            }
        }
        else if ( $(this).scrollTop() >= ($('footer').offset().top - $(this).height()) )
        {
            if(history.state != 'footer') history.replaceState('footer', null, '/footer');
        }

        });
        })
    </script>
    {% block scripts %}
    {% endblock %}
</body>
</html>
